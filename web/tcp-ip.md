# Протокол TCP/IP или как работает интернет

[Ссылка на источник](https://www.youtube.com/watch?v=2I1HnSN1H9o&t=27s&ab_channel=ListenIT)

Все почти как на старой почте 

Опишем алгоритм действий, происходящих на почте:

- Мы пишем на листке письмо;
- Кладем письмо в конверт, заклеиваем
- На обратной стороне конверта пишем адреса отправителя и получателя;
- Несем конверт в ближайшее отделение почты;
- Письмо проходит через цепочку почтовых отделений до ближайшего к получателю;
- Почтальон относит письмо получателю или кладет его в почтовый ящик с номером квартиры;
- Когда поулчатель захочет ответить, то он в ответном письме поменяет адреса местами и писмо отправится по той же цепочке, но в обратном направлении

Вот так будет выглядеть результат:

> **Адрес отправителя:** \
> От кого: Иванов Иван Иванович \
> Откуда: Камушенск, Тутуево, ул В.Жмышенко 54

> **Адрес получателя:** \
> Кому: Петров Петр \
> Куда: Москва, ул Академика Волгина 4

## Взаимодействие в сети

Взаимодействие компьютеров в сети происходит примерно по такой же цепочке

Каждый компьютер (узел, хост) в сети Интернет имеет уникальный адрес - IP-адрес (Internet Protocol Address), например 195.34.54.1

Адрес состоит из 4 цифр от 0 до 255, которые разделены точкой

Но знать только IP-адрес еще не достаточно, чтобы отправить информацию, так как информацией обмениваются не компьютеры сами по себе, а приложения, которые запущены на них, поэтому нужно также знать номер приложения - его порт (например, почтовый сервис имеет порт 25 или слушает 25 порт, веб сервис 	- 80, FTP - 25 и т. д.).

Аналогия тут следующая: для доставки письма не достаточно знать просто номер дома, также нужно знать номер квартиры, этаж и другую информацию и каждое запущенное приложение имеет такой же номер - номер порта

Еще раз
> Адрес дома - IP-адрес компьютера \
> Номер квартиры - порт, который слушает приложение 

В компьютерных сетях, работающих по протоколам TCP/IP, аналогом бумажного письма является **пакет**, который содержит передаваемые данные и адреса отправителя и получателя

> **Адрес отправителя (Source address):** \
> IP: 123.111.23.1 \
> Port: 2054

> **Адрес получателя (Destination address):** \
> IP: 192.168.0.1 \
> Port: 54

> **Данные пакета** \
> ...

Внутри пакета содержится служебная информация, но на данный момент это не важно

> Комбинация IP-aдреса и порта называется **сокетом**

В данном примере с сокетом 123.111.23.1:2054 отправляем пакет на сокет 192.168.0.1:54. То есть информация пойдет на компьютер с IP-адресом 192.168.0.1 на порт 54, которому соответствует сервер распознавания имен (DNS сервер), который примет этот пакет.

Зная адрес отправителя этот сервер может после обработки запроса сформировать ответный пакет, который пойдет в обратном направлении на адрес 123.111.23.1 и сокет 2054, который будет для DNS сервера отправителя будет являться получателем

> Как правило взаимодействие осуществляется по схеме "клиент-сервер"
> "Клиент" запрашивает информацию, а сервер принимает запрос, обрабатывает его и посылает результат.

Большая часть програм на ПК являются клиентами: почтовые клиенты, браузеры и пр.

Номера портов на клиенте не фиксированные, как у сервера, а назначаются ОС динамически.

Фискисрованные серверные порты, как правило имеют номера до 1024 (но есть исключения), а клиентские начинаются после 1024.


С цифровыми IP-адресами работать довольно трудно, куда проще работать с буквенным представлением, не так-ли?

> Любой цифровой IP-адрес можно связять с буквенно-цифровым именем. Например вместо 23.54.123.1 можно использовать имя www.example.com. \
> Преобразованием доменного имени в цифровой IP-адрес занимается сервис доменных имен - DNS (Domain Name Server).

Рассмотрим поподробнее, как это работает

Провайдер на бумажке (для ручной настройки соединения) или неявно (через автоматическую настройку соединения) предоставляет вам IP-адрес сервера имен DNS. На копмьютере с этим IP-aдресом работает приложение (сервер имен), которое знает все доменные имена в интернете и соответствующие им IP-адреса. 

DNS сервер слушает 53 порт, принимает на него запрос и выдает ответы, например

> Запрос от нашего компьютера: "Какой IP-адрес соответствует имени www.example.com?" \
>  Ответ сервера: "23.54.123.1"

Теперь рассмотрим, что происходит, когда в браузере мы вводим доменное имя (URL) сайта www.example.com и получаем в ответ от WEB-сервера эту страницу.

> 

